name: Build Validation
run-name: ${{ github.actor }} pushed an update
on: [push]
jobs:
  Build-Validation:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
      - name: Select 'all' target
        run: sed -i "s/checksum/all/g" ${{ github.workspace }}/resources/options
      # - name: Docker Setup Docker
      #   uses: docker/setup-docker-action@v4.1.0
      - name: Build and push Docker images
        uses: docker/build-push-action@v6.11.0
        with:
          push: false
          tags: xtide-builder:latest
      - run: mkdir -p ${{ github.workspace }}/src
      - uses: addnab/docker-run-action@v3
        with:
          # username: ${{ secrets.DOCKER_USERNAME }}
          # password: ${{ secrets.DOCKER_PASSWORD }}
          # registry: gcr.io
          image: xtide-builder:latest
          options: --user 1001:121 -v ${{ github.workspace }}/src:/src
          run: |
            cd /
            ./xtide_build.sh
      - name: List files in the repository
        run: |
          ls -l ${{ github.workspace }}/src
  
      - run: echo "üçè This job's status is ${{ job.status }}."
